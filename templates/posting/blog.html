{% extends 'base.html' %}
{% load static %}
{% load blog_tags %}

<link href="{% static "css/sidebar.css" %}" rel="stylesheet">

{% block content %}
    <link href="{% static "css/sidebar.css" %}" rel="stylesheet">
    {% csrf_token %}


    {% for post in posts %}

        <div class="card shadow bg-white" style="margin-bottom: 10px; margin-top: 10px">
            <div class="card-body" style="background-color: #ddffdd; padding: 10px">
                <h2 class="card-title" style="margin-top: 20px"><a href="{% url 'post_detail' pk=post.pk %}">{{ post.title }}</a></h2>
                <p class="card-text" style="margin-bottom: 5px;"> {{ post.body_summary|striptags }} </p>
                <hr>
                <div>
                    {% if post.tags %}
                        <b>теги:</b>&nbsp;
                    {% endif %}
                    {% for tag in post.tags %}
                        <a style="color: black"
                           href="{% url "blog" %}?tag_value={{ tag }}"
                        ><i>{{ tag }}</i></a>{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                    <div style="text-align: right;"><i >{{ post.created_date }}</i></div>
                </div>
{#                <div> {{ post.created_date }}</div>#}
            </div>
        </div>

    {% endfor %}
    {% include "pagination.html" with page=posts %}

{% endblock %}

{% block sidebar %}
    <link href="{% static "css/sidebar.css" %}" rel="stylesheet">
    {% csrf_token %}

    <h3 style="margin-bottom: 5px">Поиск по содержанию</h3>
    <form action="." method="get">
        <p>
            <input type="text" name="query" required="" id="id_query"
                   style="background: #FFFFFF;"></p>
        <input name="content" type="submit" value="искать"
               style="padding: 5px 20px; border-radius: 10px; ">
    </form>

    <br><br>
    <h3 style="margin-bottom: 1px">Поиск по тегам</h3>
    <form action="." method="get" id="tagform">
        <p>
            <select name="query" id="tags" form="tagform" id="id_query"
                    class="form-control" onfocus='this.size=5;' onblur='this.size=1;'
                    onchange='this.size=1; this.blur();'
            style="background-color: #FFFFFF; width: 100%; font-size: 16px">
                    <option hidden disabled selected value> -- select an option -- </option>
                {% for tag in all_tags %}
                    <option value="{{ tag }}">{{ tag }}</option>
                {% endfor %}
            </select>
        </p>
        <input name="tag" type="submit" value="искать"
               style="padding: 5px 20px; border-radius: 10px;">
    </form>
    <br>
    <h3>Последие статьи</h3>
    {% show_latest_posts 3 %}

{% endblock %}
